<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
		<meta name='author'           content="Matthias Moulin">
		<meta name='copyright'        content="Copyright Â© 2014 Matthias Moulin. All Rights Reserved.">
        <meta name="twitter:card"     content="summary_large_image">
		<meta name="twitter:image"    content="https://matt77hias.github.io/res/Picture.jpg">
		<meta name="twitter:site"     content="@matt77hias">
		<meta name="twitter:title"    content="Tron">
		<title>Tron</title>
		<link rel="icon" 		        href="https://matt77hias.github.io/favicon.ico"        type="image/x-icon">
		<link rel="shortcut icon"       href="https://matt77hias.github.io/favicon.ico"        type="image/x-icon">
		<style type=text/css>a:link{text-decoration:none;color:#0f66e6}a:visited{text-decoration:none}a:active{text-decoration:none}a:hover{text-decoration:underline;color:#ea157a}html,body{height:100%;margin:0}</style><style type=text/css>html,head,body{padding:0;margin:0}body{font-family:calibri,helvetica,arial,sans-serif}
		</style>
		<script src="https://matt77hias.github.io/js/google-analytics.js" async type="text/javascript"></script>
	</head>
<body>
<script type=text/javascript src=./tron.elm_files/elm-runtime.js.download></script>
<script type=text/javascript>Elm.Main=Elm.Main||{};Elm.Main.make=function(q){q.Main=q.Main||{};if(q.Main.values){return q.Main.values}var F={},k=Elm.Native,h=k.Utils.make(q),m=k.List.make(q),u=k.Array.make(q),s=k.Error.make(q),w="Main",ai=Elm.Basics.make(q),aB=Elm.Color.make(q),aw=Elm.Debug.make(q),ax=Elm.Graphics.Collage.make(q),c=Elm.Graphics.Element.make(q),g=Elm.Keyboard.make(q),ab=Elm.List.make(q),B=Elm.Set.make(q),aa=Elm.Signal.make(q),i=Elm.Text.make(q),aA=Elm.Time.make(q);var ac=2;var U=F2(function(N,E){return A2(ax.traced,h.replace([["width",ac],["color",N]],ax.defaultLine),ax.path(E))});var P={ctor:"W"};var R={ctor:"S"};var ad={ctor:"E"};var V={ctor:"N"};var ak=16;var ae=64;var Y=F3(function(E,N,S){return function(){switch(N.ctor){case"_Tuple2":return function(){var aK=ai.toFloat(ae);var aJ=function(){switch(S.ctor){case"E":return{ctor:"_Tuple3",_0:aK/2,_1:0,_2:0};case"N":return{ctor:"_Tuple3",_0:0,_1:aK/2,_2:90};case"S":return{ctor:"_Tuple3",_0:0,_1:(0-aK)/2,_2:-90};case"W":return{ctor:"_Tuple3",_0:(0-aK)/2,_1:0,_2:180}}s.Case(w,"between lines 309 and 314")}(),aI=aJ._0,aL=aJ._1,W=aJ._2;return ax.rotate(ai.degrees(W))(ax.move({ctor:"_Tuple2",_0:aI,_1:aL})(ax.move({ctor:"_Tuple2",_0:N._0,_1:N._1})(ax.outlined(ax.solid(E))(A2(ax.rect,aK,ai.toFloat(ak))))))}()}s.Case(w,"between lines 308 and 318")}()});var p=768;var ao=1024;var o=F2(function(E,N){return function(){switch(N.ctor){case"Configuration":return function(){switch(E.ctor){case"LightState":return ax.group(m.fromArray([A3(Y,N._2,E._0,E._2),A2(U,N._2,E._3)]))}s.Case(w,"on line 283, column 5 to 61")}()}s.Case(w,"on line 283, column 5 to 61")}()});var a=F2(function(E,N){return function(){switch(E.ctor){case"ConfigState":return function(){switch(N.ctor){case"Ended":switch(N._1.ctor){case"Player":return i.plainText(m.append(N._1._0," has won!"))}break;case"Init":return i.plainText("Press space to start a new game");case"Playing":return function(){var S=m.append(m.fromArray([A2(ax.filled,aB.black,A2(ax.rect,ao,p))]),A3(ab.zipWith,o,N._1,E._0));return A3(ax.collage,ao,p,S)}()}s.Case(w,"between lines 275 and 279")}()}s.Case(w,"between lines 275 and 279")}()});var K=F3(function(N,E,S){return function(){var W=h.cmp(E,S)<1;switch(W){case false:return h.cmp(S,N)<1&&h.cmp(N,E)<1;case true:return h.cmp(E,N)<1&&h.cmp(N,S)<1}s.Case(w,"between lines 268 and 271")}()});var x=F5(function(E,aI,W,S,N){return function(){switch(N.ctor){case"_Tuple2":return function(){switch(S.ctor){case"_Tuple2":return h.cmp(aI,S._1)<1&&(h.cmp(S._1,aI+W)<1&&(h.cmp(aI,N._1)<1&&(h.cmp(N._1,aI+W)<1&&A3(K,E,S._0,N._0))))}s.Case(w,"on line 264, column 50 to 140")}()}s.Case(w,"on line 264, column 50 to 140")}()});var C=F5(function(E,aI,N,W,S){return function(){switch(S.ctor){case"_Tuple2":return function(){switch(W.ctor){case"_Tuple2":return h.cmp(E,W._0)<1&&(h.cmp(W._0,E+N)<1&&(h.cmp(E,S._0)<1&&(h.cmp(S._0,E+N)<1&&A3(K,aI,W._1,S._1))))}s.Case(w,"on line 261, column 50 to 140")}()}s.Case(w,"on line 261, column 50 to 140")}()});var L=F2(function(E,N){return function(){switch(E.ctor){case"_Tuple4":return function(){switch(N.ctor){case"::":switch(N._1.ctor){case"::":return function(){var S=A5(C,E._0,E._1,E._2,N._0,N._1._0)||(A5(x,E._0,E._1,E._3,N._0,N._1._0)||(A5(x,E._0+E._2,E._1,E._3,N._0,N._1._0)||A5(C,E._0,E._1+E._3,E._2,N._0,N._1._0)));return function(){switch(S){case false:return A2(L,{ctor:"_Tuple4",_0:E._0,_1:E._1,_2:E._2,_3:E._3},A2(ab._op["::"],N._1._0,N._1._1));case true:return true}s.Case(w,"between lines 256 and 258")}()}();case"[]":return false}break;case"[]":return false}s.Case(w,"between lines 251 and 258")}()}s.Case(w,"between lines 251 and 258")}()});var ap=F2(function(N,E){return function(){switch(E.ctor){case"::":return function(){var S=A2(L,N,E._0);return function(){switch(S){case false:return A2(ap,N,E._1);case true:return true}s.Case(w,"between lines 245 and 248")}()}();case"[]":return false}s.Case(w,"between lines 242 and 248")}()});var D=function(E){return function(){switch(E.ctor){case"_Tuple4":return function(){var S=ai.toFloat(p)/2;var N=ai.toFloat(ao)/2;return h.cmp(E._0,0-N)<1||(h.cmp(N,E._0)<1||(h.cmp(E._1,0-S)<1||(h.cmp(S,E._1)<1||(h.cmp(E._0+E._2,0-N)<1||(h.cmp(N,E._0+E._2)<1||(h.cmp(E._1+E._3,0-S)<1||h.cmp(S,E._1+E._3)<1))))))}()}s.Case(w,"between lines 236 and 238")}()};var y=F2(function(E,N){return function(){switch(E.ctor){case"_Tuple2":return function(){var W=ai.toFloat(ak);var S=ai.toFloat(ae);return function(){switch(N.ctor){case"E":return{ctor:"_Tuple4",_0:E._0,_1:E._1-W/2,_2:S,_3:W};case"N":return{ctor:"_Tuple4",_0:E._0-W/2,_1:E._1,_2:W,_3:S};case"S":return{ctor:"_Tuple4",_0:E._0-W/2,_1:E._1-S,_2:W,_3:S};case"W":return{ctor:"_Tuple4",_0:E._0-S,_1:E._1-W/2,_2:S,_3:W}}s.Case(w,"between lines 228 and 233")}()}()}s.Case(w,"between lines 226 and 233")}()});var aE=F3(function(S,N,E){return function(){var W=A2(y,S,N);return D(W)||A2(ap,W,E)}()});var H=function(E){return function(){switch(E.ctor){case"Playing":return function(){var N=A2(ab.map,function(S){return function(){switch(S.ctor){case"LightState":return S._3}s.Case(w,"on line 216, column 45 to 46")}()},E._1);return A2(ab.map,function(S){return function(){switch(S.ctor){case"LightState":return A3(aE,S._0,S._2,N)}s.Case(w,"on line 217, column 42 to 67")}()},E._1)}()}s.Case(w,"between lines 216 and 217")}()};var az=F2(function(E,N){return function(){switch(E.ctor){case"_Tuple2":return function(){switch(E._0){case -1:return P;case 1:return ad}return function(){switch(E._1){case -1:return R;case 1:return V}return N}()}()}s.Case(w,"between lines 205 and 211")}()});var t=function(E){return function(){switch(E.ctor){case"E":return{ctor:"_Tuple2",_0:1,_1:0};case"N":return{ctor:"_Tuple2",_0:0,_1:1};case"S":return{ctor:"_Tuple2",_0:0,_1:-1};case"W":return{ctor:"_Tuple2",_0:-1,_1:0}}s.Case(w,"between lines 197 and 202")}()};var aH=F2(function(N,E){return function(){switch(E.ctor){case"_Tuple2":return function(){switch(N.ctor){case"_Tuple2":return function(){var S=h.eq(N._0,E._0);switch(S){case false:return function(){var W=h.eq(N._1,E._1);switch(W){case false:return ai.sqrt((N._0-E._0)*(N._0-E._0)+(N._1-E._1)*(N._1-E._1));case true:return ai.abs(N._0-E._0)}s.Case(w,"between lines 191 and 193")}();case true:return ai.abs(N._1-E._1)}s.Case(w,"between lines 189 and 193")}()}s.Case(w,"between lines 189 and 193")}()}s.Case(w,"between lines 189 and 193")}()});var v=F2(function(E,N){return function(){switch(E.ctor){case"::":switch(E._1.ctor){case"::":return function(){var S=N+A2(aH,E._0,E._1._0);return A2(v,A2(ab._op["::"],E._1._0,E._1._1),S)}();case"[]":return N}break;case"[]":return N}s.Case(w,"between lines 180 and 185")}()});var am=function(E){return A2(v,E,0)};var j=F3(function(E,S,N){return function(){var W=h.cmp(S,N)<0;switch(W){case false:return S-E;case true:return S+E}s.Case(w,"between lines 171 and 173")}()});var T=F3(function(S,N,E){return function(){switch(E.ctor){case"_Tuple2":return function(){switch(N.ctor){case"_Tuple2":return function(){var W=h.eq(N._0,E._0);switch(W){case false:return function(){var aI=h.eq(N._1,E._1);switch(aI){case false:return{ctor:"_Tuple2",_0:0,_1:0};case true:return{ctor:"_Tuple2",_0:A3(j,S,N._0,E._0),_1:N._1}}s.Case(w,"between lines 165 and 167")}();case true:return{ctor:"_Tuple2",_0:N._0,_1:A3(j,S,N._1,E._1)}}s.Case(w,"between lines 163 and 167")}()}s.Case(w,"between lines 163 and 167")}()}s.Case(w,"between lines 163 and 167")}()});var ag=F2(function(N,E){return function(){switch(E.ctor){case"::":switch(E._1.ctor){case"::":return function(){var S=h.cmp(N,0)<1;switch(S){case false:return function(){var W=N-A2(aH,E._0,E._1._0);return function(){var aI=h.eq(W,0);switch(aI){case false:return function(){var aJ=h.cmp(W,0)>0;switch(aJ){case false:return function(){var aK=A3(T,N,E._0,E._1._0);return A2(ab._op["::"],aK,A2(ab._op["::"],E._1._0,E._1._1))}();case true:return A2(ag,W,A2(ab._op["::"],E._1._0,E._1._1))}s.Case(w,"between lines 156 and 159")}();case true:return A2(ab._op["::"],E._1._0,E._1._1)}s.Case(w,"between lines 154 and 159")}()}();case true:return A2(ab._op["::"],E._0,A2(ab._op["::"],E._1._0,E._1._1))}s.Case(w,"between lines 151 and 159")}();case"[]":return A2(ab._op["::"],E._0,m.fromArray([]))}break;case"[]":return m.fromArray([])}s.Case(w,"between lines 147 and 159")}()});var O=F3(function(S,N,E){return function(){switch(E.ctor){case"_Tuple2":return function(){switch(N.ctor){case"_Tuple2":return function(){switch(S.ctor){case"_Tuple2":return function(){var W=h.eq(S._0,N._0)&&h.eq(N._0,E._0);switch(W){case false:return function(){var aI=h.eq(S._1,N._1)&&h.eq(N._1,E._1);switch(aI){case false:return A2(ab._op["::"],{ctor:"_Tuple2",_0:S._0,_1:S._1},A2(ab._op["::"],{ctor:"_Tuple2",_0:N._0,_1:N._1},A2(ab._op["::"],{ctor:"_Tuple2",_0:E._0,_1:E._1},m.fromArray([]))));case true:return A2(ab._op["::"],{ctor:"_Tuple2",_0:S._0,_1:S._1},A2(ab._op["::"],{ctor:"_Tuple2",_0:E._0,_1:S._1},m.fromArray([])))}s.Case(w,"between lines 141 and 143")}();case true:return A2(ab._op["::"],{ctor:"_Tuple2",_0:S._0,_1:S._1},A2(ab._op["::"],{ctor:"_Tuple2",_0:S._0,_1:E._1},m.fromArray([])))}s.Case(w,"between lines 139 and 143")}()}s.Case(w,"between lines 139 and 143")}()}s.Case(w,"between lines 139 and 143")}()}s.Case(w,"between lines 139 and 143")}()});var Q=F2(function(N,E){return function(){var S=ab.reverse(E);return function(){switch(S.ctor){case"::":switch(S._1.ctor){case"::":return m.append(ab.reverse(S._1._1),A3(O,S._1._0,S._0,N));case"[]":return A2(ab._op["::"],S._0,A2(ab._op["::"],N,m.fromArray([])))}break;case"[]":return m.fromArray([N])}s.Case(w,"between lines 133 and 136")}()}()});var l=F3(function(S,N,E){return function(){switch(E.ctor){case"_Tuple2":return function(){switch(N.ctor){case"_Tuple2":return function(){switch(S.ctor){case"_Tuple2":return{ctor:"_Tuple2",_0:S._0+N._0*ai.toFloat(E._0),_1:S._1+N._1*ai.toFloat(E._1)}}s.Case(w,"on line 119, column 6 to 58")}()}s.Case(w,"on line 119, column 6 to 58")}()}s.Case(w,"on line 119, column 6 to 58")}()});var M=F2(function(E,N){return function(){switch(E.ctor){case"_Tuple4":return A2(B.member,E._0,N)?{ctor:"_Tuple2",_0:0,_1:1}:A2(B.member,E._1,N)?{ctor:"_Tuple2",_0:0,_1:-1}:A2(B.member,E._2,N)?{ctor:"_Tuple2",_0:-1,_1:0}:A2(B.member,E._3,N)?{ctor:"_Tuple2",_0:1,_1:0}:{ctor:"_Tuple2",_0:0,_1:0}}s.Case(w,"between lines 71 and 76")}()});var r=F2(function(N,E){return function(){switch(N.ctor){case"ConfigState":return function(){var S=B.fromList(E);return A2(ab.map,function(W){return function(){switch(W.ctor){case"Configuration":return A2(M,W._1,S)}s.Case(w,"on line 67, column 43 to 68")}()},N._0)}()}s.Case(w,"between lines 66 and 67")}()});var J=aA.every(aA.second/30);var X=256;var f=F2(function(N,E){return function(){var S=A2(Q,N,E);var W=am(S)-X;return function(){var aI=h.cmp(W,0)>0;switch(aI){case false:return S;case true:return A2(ag,W,S)}s.Case(w,"between lines 126 and 129")}()}()});var aF=ai.toFloat(50)/10;var aG=ai.toFloat(50)/10;var z=ai.toFloat(p)/2-50;var A=ai.toFloat(ao)/2-50;var at=F2(function(N,E){return{ctor:"GameInput",_0:N,_1:E}});var au=F2(function(N,E){return function(){switch(E.ctor){case"KeybInput":return A2(at,A2(r,N,E._0),E._1)}s.Case(w,"on line 62, column 40 to 70")}()});var aC=F2(function(N,E){return{ctor:"KeybInput",_0:N,_1:E}});var aD=function(){var E=A3(aa.lift2,aC,g.keysDown,g.space);var N=A2(aa.sampleOn,J,E);return A2(aa.lift,aw.watch("keybInput"),N)}();var an={ctor:"Init"};var aq=F2(function(N,E){return{ctor:"Ended",_0:N,_1:E}});var al=F2(function(N,E){return{ctor:"Playing",_0:N,_1:E}});var b=F4(function(N,E,W,S){return{ctor:"LightState",_0:N,_1:E,_2:W,_3:S}});var I=function(){var E=A4(b,{ctor:"_Tuple2",_0:A,_1:0},{ctor:"_Tuple2",_0:aG,_1:aF},P,m.fromArray([]));var N=A4(b,{ctor:"_Tuple2",_0:0-A,_1:0},{ctor:"_Tuple2",_0:aG,_1:aF},ad,m.fromArray([]));return A2(al,true,m.fromArray([N,E]))}();var av=F2(function(N,E){return function(){switch(E.ctor){case"LightState":return function(){switch(N.ctor){case"_Tuple2":return function(){var aI=A2(f,E._0,E._3);var W=A2(az,{ctor:"_Tuple2",_0:N._0,_1:N._1},E._2);var aJ=t(W),S=aJ._0,aL=aJ._1;var aK=A3(l,E._0,E._1,{ctor:"_Tuple2",_0:S,_1:aL});return A4(b,aK,E._1,W,aI)}()}s.Case(w,"between lines 110 and 114")}()}s.Case(w,"between lines 110 and 114")}()});var ah=function(E){return{ctor:"ConfigState",_0:E}};var af=F3(function(N,E,S){return{ctor:"Configuration",_0:N,_1:E,_2:S}});var ar=function(E){return{ctor:"Player",_0:E}};var Z=function(){var E=A3(af,ar("Player 2"),{ctor:"_Tuple4",_0:38,_1:40,_2:37,_3:39},aB.orange);var N=A3(af,ar("Player 1"),{ctor:"_Tuple4",_0:87,_1:83,_2:65,_3:68},aB.lightBlue);return ah(m.fromArray([N,E]))}();var G=aa.constant(Z);var e=A3(aa.lift2,au,G,aD);var aj=F3(function(S,N,E){return function(){var aJ=H(E);var aI=function(){switch(aJ.ctor){case"::":switch(aJ._1.ctor){case"::":switch(aJ._1._1.ctor){case"[]":return aJ._0}break}break}s.Case(w,"on line 99, column 24 to 37")}();var W=function(){switch(aJ.ctor){case"::":switch(aJ._1.ctor){case"::":switch(aJ._1._1.ctor){case"[]":return aJ._1._0}break}break}s.Case(w,"on line 99, column 24 to 37")}();var aJ=N;var aL=function(){switch(aJ.ctor){case"ConfigState":switch(aJ._0.ctor){case"::":switch(aJ._0._0.ctor){case"Configuration":switch(aJ._0._1.ctor){case"::":switch(aJ._0._1._0.ctor){case"Configuration":switch(aJ._0._1._1.ctor){case"[]":return aJ._0._0._0}break}break}break}break}break}s.Case(w,"on line 98, column 78 to 80")}();var aK=function(){switch(aJ.ctor){case"ConfigState":switch(aJ._0.ctor){case"::":switch(aJ._0._0.ctor){case"Configuration":switch(aJ._0._1.ctor){case"::":switch(aJ._0._1._0.ctor){case"Configuration":switch(aJ._0._1._1.ctor){case"[]":return aJ._0._1._0._0}break}break}break}break}break}s.Case(w,"on line 98, column 78 to 80")}();return function(){var aM=aI&&W;switch(aM){case false:return function(){switch(aI){case false:return function(){switch(W){case false:return E;case true:return A2(aq,S,aL)}s.Case(w,"between lines 104 and 107")}();case true:return A2(aq,S,aK)}s.Case(w,"between lines 102 and 107")}();case true:return A2(aq,S,ar("None"))}s.Case(w,"between lines 100 and 107")}()}()});var ay=F2(function(N,E){return function(){switch(N.ctor){case"_Tuple2":switch(N._1.ctor){case"GameInput":return function(){switch(N._1._1){case false:return function(){switch(E.ctor){case"Ended":return A2(aq,N._1._1,E._1);case"Playing":return A3(aj,N._1._1,N._0,A2(al,N._1._1,A3(ab.zipWith,av,N._1._0,E._1)))}return E}();case true:return function(){switch(E.ctor){case"Ended":return function(){switch(E._0){case false:return I;case true:return A2(aq,N._1._1,E._1)}s.Case(w,"between lines 86 and 89")}();case"Playing":return function(){switch(E._0){case false:return I;case true:return A3(aj,N._1._1,N._0,A2(al,N._1._1,A3(ab.zipWith,av,N._1._0,E._1)))}s.Case(w,"between lines 83 and 86")}()}return I}()}s.Case(w,"between lines 81 and 93")}()}break}s.Case(w,"between lines 81 and 93")}()});var d=A2(aa.lift,aw.watch("Game state"),A3(aa.foldp,ay,an,A3(aa.lift2,F2(function(E,N){return{ctor:"_Tuple2",_0:E,_1:N}}),G,e)));var n=A3(aa.lift2,a,G,d);q.Main.values={_op:F,Player:ar,Configuration:af,ConfigState:ah,LightState:b,Playing:al,Ended:aq,Init:an,KeybInput:aC,GameInput:at,initialConfigState:Z,initialGameState:I,initPosX:A,initPosY:z,initSpeedX:aG,initSpeedY:aF,maxTail:X,heartbeat:J,keybInput:aD,gameInput:au,dirs:r,dir_to_offsets:M,gameState_step:ay,check_winner:aj,lightState_step:av,update_pos:l,update_tail:f,tail_add:Q,tail_component_add:O,tail_cut:ag,clip:T,clipf:j,tail_length:am,tail_length$:v,tail_component_length:aH,from_orientation:t,to_orientation:az,check_lost:H,detect_collision:aE,rectangle:y,detect_board_collision:D,detect_tails_collision:ap,detect_tail_collision:L,crossesH:C,crossesV:x,betweenf:K,showGameState:a,showLightState:o,cState:G,gInput:e,gState:d,main:n,width:ao,height:p,playerW:ae,playerH:ak,N:V,E:ad,S:R,W:P,showPlayer$:Y,tailWidth:ac,showTail:U};return q.Main.values};</script>
<script type=text/javascript>var runningElmModule=Elm.fullscreen(Elm.Main);</script>
</body>
</html>
